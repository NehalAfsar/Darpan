<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Psychometric Test - Full Screen</title>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #009688;
      --primary-hover: #00796B;
      --surface: #fff;
      --background: #FFF7DC;
      --border: #dadce0;
      --text-primary: #202124;
      --text-secondary: #5f6368;
      --text-disabled: #9aa0a6;
      --error: #ea4335;
      --shadow: 0 1px 3px rgba(60, 64, 67, 0.3);
    }

    body {
      font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
      background: var(--background);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.5;
    }

    .container {
      width: 100%;
      padding: 20px 40px;
    }

    .form-header {
      display: flex;
      align-items: center;
      margin-bottom: 24px;
      padding: 24px 0;
      border-bottom: 1px solid var(--border);
    }

    .form-icon {
      background: var(--primary);
      color: #fff;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 16px;
    }

    .form-icon .material-icons {
      font-size: 28px;
    }

    .form-title {
      font-size: 32px;
      font-weight: 400;
      color: var(--text-primary);
    }

    .form-description {
      margin-top: 8px;
      color: var(--text-secondary);
      font-size: 14px;
    }

    .btn {
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 4px;
      cursor: pointer;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--primary);
      float: right;
    }

    .btn:hover {
      background: rgba(0, 150, 136, 0.04);
    }

    .form-card {
      background: var(--surface);
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
    }

    .section-title {
      font-size: 20px;
      font-weight: 500;
      margin-bottom: 16px;
      color: var(--text-primary);
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    .required::after {
      content: " *";
      color: var(--error);
    }

    .form-input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 4px;
      font-size: 14px;
      background: #fff;
    }

    .form-input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 2px rgba(0, 150, 136, 0.2);
    }

    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .radio-option {
      display: flex;
      align-items: center;
      padding: 8px 0;
      cursor: pointer;
      position: relative;
    }

    .radio-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .radio-custom {
      position: relative;
      width: 20px;
      height: 20px;
      border: 2px solid var(--text-disabled);
      border-radius: 50%;
      margin-right: 12px;
      flex-shrink: 0;
      transition: border-color .2s;
    }

    .radio-option:hover .radio-custom,
    .radio-option input[type="radio"]:checked+.radio-custom {
      border-color: var(--primary);
    }

    .radio-option input[type="radio"]:checked+.radio-custom::after {
      content: "";
      position: absolute;
      top: 3px;
      left: 3px;
      width: 10px;
      height: 10px;
      background: var(--primary);
      border-radius: 50%;
    }

    .submit-section {
      text-align: center;
      margin-top: 30px;
    }

    .submit-btn {
      background-color: var(--primary);
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }

    .submit-btn:hover {
      background-color: var(--primary-hover);
    }

    .error-message {
      color: var(--error);
      font-size: 12px;
      margin-top: 4px;
      display: none;
    }

    @media (max-width: 600px) {
      .form-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .form-icon {
        margin-bottom: 16px;
      }

      .form-title {
        font-size: 24px;
      }

      .btn {
        width: 100%;
        margin-top: 16px;
        float: none;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="form-header">
      <div class="form-icon">
        <i class="material-icons">psychology_alt</i>
      </div>
      <div style="flex-grow: 1;">
        <h1 class="form-title" data-en="Personality Assessment Test" data-np="व्यक्तित्व मूल्यांकन परीक्षण">Personality
          Assessment Test</h1>
        <p class="form-description"
          data-en="This test helps identify key personality traits to better understand your strengths and preferences. You must be 18+ to take this test."
          data-np="यो परीक्षणले तपाईको व्यक्तित्व विशेषता पहिचान गर्न र तपाईका क्षमता बुझ्न सहयोग पुर्‍याउँछ। यो परीक्षण लिन तपाईं १८ वर्ष भन्दा माथि हुनु पर्छ।">
          This test helps identify key personality traits to better understand your strengths and preferences. You must
          be 18+ to take this test.</p>
      </div>
      <button type="button" class="btn" id="langToggle">नेपाली</button>
    </div>

    <form class="form-card" id="psychometricForm">
      <h2 class="section-title" data-en="A. Personal Information" data-np="क. व्यक्तिगत जानकारी">A. Personal Information
      </h2>

      <div class="form-group">
        <label for="name" class="form-label required" data-en="Full Name" data-np="पूरा नाम">Full Name</label>
        <input type="text" id="name" name="name" class="form-input" placeholder="Enter your full name" required />
      </div>

      <div class="form-group">
        <label for="age" class="form-label required" data-en="Age" data-np="उमेर">Age</label>
        <input type="number" id="age" name="age" class="form-input" placeholder="Enter your age" min="1" required />
        <div class="error-message" id="ageError" data-en="You must be 18 or older to take this test"
          data-np="तपाईंले यो परीक्षण लिन १८ वर्ष वा माथि हुनु पर्छ">You must be 18 or older to take this test</div>
      </div>

      <div class="form-group">
        <label class="form-label required" data-en="Choose an option" data-np="विकल्प चयन गर्नुहोस्">Choose an
          option</label>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="gender" value="for all" />
            <span class="radio-custom"></span>
            <span data-en="For all" data-np="सबैका लागि">For all</span>
          </label>
          <label class="radio-option">
            <input type="radio" name="gender" value="female" />
            <span class="radio-custom"></span>
            <span data-en="Female" data-np="महिला">Female</span>
          </label>
        </div>
      </div>

      <div class="submit-section">
        <button type="submit" class="submit-btn" data-en="Submit" data-np="बुझाउनुहोस्">Submit</button>
      </div>
    </form>
  </div>

  <script>
    const toggleBtn = document.getElementById('langToggle');
    let currentLang = 'en';

    toggleBtn.addEventListener('click', () => {
      currentLang = currentLang === 'en' ? 'np' : 'en';
      toggleBtn.innerText = currentLang === 'en' ? 'नेपाली' : 'English';

      document.querySelectorAll('[data-en]').forEach(el => {
        el.innerText = el.getAttribute(`data-${currentLang}`);
      });
    });

    document.getElementById('psychometricForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const age = parseInt(document.getElementById('age').value);
      const ageError = document.getElementById('ageError');

      if (age < 18) {
        ageError.style.display = 'block';
        return;
      } else {
        ageError.style.display = 'none';
      }

      const genderInput = document.querySelector('input[name="gender"]:checked');
      if (!genderInput) {
        alert(currentLang === 'en' ? "Please select an option before submitting." : "कृपया पेश गर्नु अघि विकल्प चयन गर्नुहोस्।");
        return;
      }

      const gender = genderInput.value;

      try {
        const response = await fetch('https://phycometric-test.onrender.com/api/quiz/start', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, age, target: gender })
        });

        if (!response.ok) throw new Error('Failed to save user');

        const data = await response.json();
        const userId = data.id;
    
        localStorage.setItem('quiz_user_id', userId);

        if (gender === "for all") {
          window.location.href = "all_form.html";
        } else {
          window.location.href = "Female_From.html";
        }
      } catch (err) {
        alert("Error submitting data. Try again later.");
        console.error(err);
      }
    });

    document.getElementById('age').addEventListener('change', function () {
      const age = parseInt(this.value);
      const ageError = document.getElementById('ageError');
      ageError.style.display = age < 18 ? 'block' : 'none';
    });
  </script>
</body>

</html>